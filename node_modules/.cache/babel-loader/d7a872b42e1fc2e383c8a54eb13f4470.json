{"ast":null,"code":"function resizeCanvasBoard(canvas) {\n  var ratio = Math.max(window.devicePixelRatio || 1, 1);\n  canvas.width = canvas.offsetWidth * ratio;\n  canvas.height = canvas.offsetHeight * ratio;\n  canvas.getContext(\"2d\").scale(ratio, ratio);\n}\n\n$(document).ready(function () {\n  var canvas = document.querySelector(\"canvas\");\n\n  if (canvas) {\n    canvas.height = canvas.offsetHeight;\n    canvas.width = canvas.offsetWidth;\n    window.onresize = resizeCanvasBoard(canvas);\n    resizeCanvasBoard(canvas);\n    signature_pad = new SignaturePad(canvas);\n    $('#clear-signature-pad').click(function () {\n      signature_pad.clear();\n    });\n    $('#save-signature-pad').click(function (event) {\n      if (signature_pad.isEmpty()) {\n        alert('You must draw your signature to save');\n        event.preventDefault();\n      } else {\n        $('#signature-input').val(signature_pad.toDataURL());\n        var data = signature_pad.toDataURL('image/png');\n        $('#signature-preview').attr('src', data);\n        var sign = new Image();\n        sign.src = data;\n        document.body.appendChild(sign);\n        var imagePath = data;\n        var fileName = \"sign.png\";\n        saveAs(imagePath, fileName);\n        console.log(sign); // $.ajax({\n        //     url: \"/users/update_data\",\n        //     type: \"POST\",\n        //     data: {\"image_data\" : data},\n        //     success: function(updated_data) {\n        //     }\n        // });\n      }\n    });\n  }\n});","map":{"version":3,"sources":["/home/nascenia/Desktop/bkh-digitization/app/assets/src/save_signature.js"],"names":["resizeCanvasBoard","canvas","ratio","Math","max","window","devicePixelRatio","width","offsetWidth","height","offsetHeight","getContext","scale","$","document","ready","querySelector","onresize","signature_pad","SignaturePad","click","clear","event","isEmpty","alert","preventDefault","val","toDataURL","data","attr","sign","Image","src","body","appendChild","imagePath","fileName","saveAs","console","log"],"mappings":"AAAA,SAASA,iBAAT,CAA2BC,MAA3B,EAAmC;AAC/B,MAAIC,KAAK,GAAIC,IAAI,CAACC,GAAL,CAASC,MAAM,CAACC,gBAAP,IAA2B,CAApC,EAAuC,CAAvC,CAAb;AACAL,EAAAA,MAAM,CAACM,KAAP,GAAeN,MAAM,CAACO,WAAP,GAAqBN,KAApC;AACAD,EAAAA,MAAM,CAACQ,MAAP,GAAgBR,MAAM,CAACS,YAAP,GAAsBR,KAAtC;AACAD,EAAAA,MAAM,CAACU,UAAP,CAAkB,IAAlB,EAAwBC,KAAxB,CAA8BV,KAA9B,EAAqCA,KAArC;AACH;;AAEDW,CAAC,CAACC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAW;AACzB,MAAId,MAAM,GAAGa,QAAQ,CAACE,aAAT,CAAuB,QAAvB,CAAb;;AACA,MAAIf,MAAJ,EAAW;AACPA,IAAAA,MAAM,CAACQ,MAAP,GAAgBR,MAAM,CAACS,YAAvB;AACAT,IAAAA,MAAM,CAACM,KAAP,GAAeN,MAAM,CAACO,WAAtB;AACAH,IAAAA,MAAM,CAACY,QAAP,GAAkBjB,iBAAiB,CAACC,MAAD,CAAnC;AACAD,IAAAA,iBAAiB,CAACC,MAAD,CAAjB;AACAiB,IAAAA,aAAa,GAAG,IAAIC,YAAJ,CAAiBlB,MAAjB,CAAhB;AACAY,IAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BO,KAA1B,CAAgC,YAAW;AAAEF,MAAAA,aAAa,CAACG,KAAd;AAAuB,KAApE;AACAR,IAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBO,KAAzB,CAA+B,UAASE,KAAT,EAAgB;AAC3C,UAAIJ,aAAa,CAACK,OAAd,EAAJ,EAA4B;AACxBC,QAAAA,KAAK,CAAC,sCAAD,CAAL;AACAF,QAAAA,KAAK,CAACG,cAAN;AACH,OAHD,MAGO;AACHZ,QAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBa,GAAtB,CAA0BR,aAAa,CAACS,SAAd,EAA1B;AACA,YAAIC,IAAI,GAAGV,aAAa,CAACS,SAAd,CAAwB,WAAxB,CAAX;AACAd,QAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBgB,IAAxB,CAA6B,KAA7B,EAAmCD,IAAnC;AACA,YAAIE,IAAI,GAAG,IAAIC,KAAJ,EAAX;AACAD,QAAAA,IAAI,CAACE,GAAL,GAAWJ,IAAX;AACAd,QAAAA,QAAQ,CAACmB,IAAT,CAAcC,WAAd,CAA0BJ,IAA1B;AACA,YAAIK,SAAS,GAAGP,IAAhB;AACA,YAAIQ,QAAQ,GAAG,UAAf;AAEAC,QAAAA,MAAM,CAACF,SAAD,EAAYC,QAAZ,CAAN;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYT,IAAZ,EAXG,CAYH;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ,KAxBD;AAyBH;AACJ,CAnCD","sourcesContent":["function resizeCanvasBoard(canvas) {\n    var ratio =  Math.max(window.devicePixelRatio || 1, 1);\n    canvas.width = canvas.offsetWidth * ratio;\n    canvas.height = canvas.offsetHeight * ratio;\n    canvas.getContext(\"2d\").scale(ratio, ratio);\n}\n\n$(document).ready(function() {\n    var canvas = document.querySelector(\"canvas\");\n    if (canvas){\n        canvas.height = canvas.offsetHeight;\n        canvas.width = canvas.offsetWidth;\n        window.onresize = resizeCanvasBoard(canvas);\n        resizeCanvasBoard(canvas);\n        signature_pad = new SignaturePad(canvas);\n        $('#clear-signature-pad').click(function() { signature_pad.clear() });\n        $('#save-signature-pad').click(function(event) {\n            if (signature_pad.isEmpty()){\n                alert('You must draw your signature to save');\n                event.preventDefault();\n            } else {\n                $('#signature-input').val(signature_pad.toDataURL());\n                var data = signature_pad.toDataURL('image/png');\n                $('#signature-preview').attr('src',data);\n                var sign = new Image();\n                sign.src = data;\n                document.body.appendChild(sign);\n                var imagePath = data;\n                var fileName = \"sign.png\";\n\n                saveAs(imagePath, fileName);\n                console.log(sign);\n                // $.ajax({\n                //     url: \"/users/update_data\",\n                //     type: \"POST\",\n                //     data: {\"image_data\" : data},\n                //     success: function(updated_data) {\n                //     }\n                // });\n            }\n        });\n    }\n});\n"]},"metadata":{},"sourceType":"module"}